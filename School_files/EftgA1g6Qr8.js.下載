if (self.CavalryLogger) { CavalryLogger.start_js(["2QozH"]); }

__d("ImageUtils",["UserAgent_DEPRECATED"],(function(a,b,c,d,e,f){var g="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAASUkqAAgAAAABABIBAwABAAAABgASAAAAAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/iiiigD/2Q==",h=null;a={checkIfBrowserExifAutoRotationEnabled:function(a){if(h!=null){a(h);return}var b=new Image();b.onload=function(){h=b.width!==2,a(h)};b.onerror=function(){h=!1,a(h)};b.src=g},hasLoaded:function(a){if(a.naturalWidth!==void 0)return a.complete&&a.width!==0;else if(a.height==20&&a.width==20&&a.complete)return!1;else if(a.complete===void 0&&b("UserAgent_DEPRECATED").webkit()<500){var c=new Image();c.src=a.src;return c.complete}return a.complete}};e.exports=a}),null);
__d("SphericalMediaActionNamespaces",[],(function(a,b,c,d,e,f){"use strict";a="BASE";f.BASE=a;b="CORE";f.CORE=b;c="PHOTO";f.PHOTO=c;d="PHOTO_EDIT";f.PHOTO_EDIT=d;e="VIEW";f.VIEW=e}),null);
__d("SphericalMediaActions",[],(function(a,b,c,d,e,f){"use strict";a="TURN_ON";f.TURN_ON=a;b="TURN_OFF";f.TURN_OFF=b;c="ENABLE_SPHERICAL";f.ENABLE_SPHERICAL=c;d="DISABLE_SPHERICAL";f.DISABLE_SPHERICAL=d;e="REQUEST_PHOTO_FAILED";f.REQUEST_PHOTO_FAILED=e;a="REQUEST_PHOTO";f.REQUEST_PHOTO=a;b="RECEIVE_PHOTO";f.RECEIVE_PHOTO=b;c="UPDATE_BASE";f.UPDATE_BASE=c;d="DRAG_START";f.DRAG_START=d;e="GYRO_START";f.GYRO_START=e;a="ZOOM_START";f.ZOOM_START=a;b="SIGNIFICANT_MOVE";f.SIGNIFICANT_MOVE=b;c="MOUSE_ANIMATION_START";f.MOUSE_ANIMATION_START=c;d="MOUSE_ENTER";f.MOUSE_ENTER=d;e="TAP_HEADING_INDICATOR";f.TAP_HEADING_INDICATOR=e;a="VIEWPORT_CLICKED";f.VIEWPORT_CLICKED=a;b="VISIBILITY_CHANGED";f.VISIBILITY_CHANGED=b;c="UPDATE_DIMENSION";f.UPDATE_DIMENSION=c;d="UPDATE_INITIAL_FOV";f.UPDATE_INITIAL_FOV=d;e="UPDATE_INITIAL_VIEWPORT";f.UPDATE_INITIAL_VIEWPORT=e;a="SETUP_RENDERER";f.SETUP_RENDERER=a;b="WEBGL_CONTEXT_LOST";f.WEBGL_CONTEXT_LOST=b;c="WEBGL_INIT_FAILED";f.WEBGL_INIT_FAILED=c;d="WEBGL_RENDER_FAILED";f.WEBGL_RENDER_FAILED=d;e="SOURCE_ONLOAD";f.SOURCE_ONLOAD=e;a="REPLACE_BASE_STATE";f.REPLACE_BASE_STATE=a;b="UPDATE_CTR_ELEM";f.UPDATE_CTR_ELEM=b;c="SHOW_FALLBACK";f.SHOW_FALLBACK=c;d="FALLBACK_MOUSE_OVER";f.FALLBACK_MOUSE_OVER=d;e="FALLBACK_MOUSE_OUT";f.FALLBACK_MOUSE_OUT=e;a="FALLBACK_INDICATOR_MOUSE_OVER";f.FALLBACK_INDICATOR_MOUSE_OVER=a;b="FALLBACK_INDICATOR_MOUSE_OUT";f.FALLBACK_INDICATOR_MOUSE_OUT=b;c="UPDATE_PARTIAL_LIMITS";f.UPDATE_PARTIAL_LIMITS=c;d="USE_FALLBACK";f.USE_FALLBACK=d;e="UPDATE_VIEW";f.UPDATE_VIEW=e;a="UPDATE_VIEWPORT";f.UPDATE_VIEWPORT=a;b="UPDATE_FOV";f.UPDATE_FOV=b;c="UPDATE_YAW";f.UPDATE_YAW=c;d="UPDATE_VIEWPORT_AND_FOV";f.UPDATE_VIEWPORT_AND_FOV=d;e="START_ANIMATING";f.START_ANIMATING=e;a="STOP_ANIMATING";f.STOP_ANIMATING=a;b="UPDATE_FEED_ROOT_ELEMENT";f.UPDATE_FEED_ROOT_ELEMENT=b;c="UPDATE_PHOTO_EDIT";f.UPDATE_PHOTO_EDIT=c;d="CANCEL_EDITING";f.CANCEL_EDITING=d;e="START_EDITING";f.START_EDITING=e;a="STOP_EDITING";f.STOP_EDITING=a;b="UPDATE_PHOTO";f.UPDATE_PHOTO=b;c="UPDATE_PHOTO_FAILED";f.UPDATE_PHOTO_FAILED=c;d="UPDATE_PHOTO_DONE";f.UPDATE_PHOTO_DONE=d;e=108;f.UPDATE_RENDERER_PROJECTION_TYPE=e;a=109;f.UPDATE_RENDERER_PROJECTION_TYPE_FAILED=a;b=110;f.UPDATE_RENDERER_PROJECTION_TYPE_DONE=b;c="RESET_MOUSE_ANIMATION";f.RESET_MOUSE_ANIMATION=c;d="START_MOUSE_ANIMATION";f.START_MOUSE_ANIMATION=d;e="STOP_MOUSE_ANIMATION";f.STOP_MOUSE_ANIMATION=e;a="DISABLE_SPHERICAL_ON_SAVE";f.DISABLE_SPHERICAL_ON_SAVE=a;b="ENABLE_SPHERICAL_ON_SAVE";f.ENABLE_SPHERICAL_ON_SAVE=b;c="ENABLE_EDITING";f.ENABLE_EDITING=c;d="DISABLE_EDITING";f.DISABLE_EDITING=d;e="TAKE_STATE_SNAPSHOT";f.TAKE_STATE_SNAPSHOT=e;a="RESTORE_EDIT_STATE_FROM_SNAPSHOT";f.RESTORE_EDIT_STATE_FROM_SNAPSHOT=a;b="RESTORE_TAGS_STATE_FROM_SNAPSHOT";f.RESTORE_TAGS_STATE_FROM_SNAPSHOT=b;c="REMOVE_STATE_SNAPSHOT";f.REMOVE_STATE_SNAPSHOT=c;d="PHOTO_REMOVED";f.PHOTO_REMOVED=d;e="UPDATE_FILE_URL";f.UPDATE_FILE_URL=e;a="SET_VR_IS_PRESENTING";f.SET_VR_IS_PRESENTING=a;b="SET_VR_DEVICE";f.SET_VR_DEVICE=b;c="SET_VR_RENDERING_SUPPORTED";f.SET_VR_RENDERING_SUPPORTED=c;d="SET_VR_RENDERER_IS_READY";f.SET_VR_RENDERER_IS_READY=d;e="CANVAS_RESIZE_START";f.CANVAS_RESIZE_START=e;a="CANVAS_RESIZE_IMG_LOADED";f.CANVAS_RESIZE_IMG_LOADED=a;b="CANVAS_RESIZE_SUCCESS";f.CANVAS_RESIZE_SUCCESS=b;c="CANVAS_RESIZE_FAILED";f.CANVAS_RESIZE_FAILED=c;d="OPEN_TAG_DIALOG";f.OPEN_TAG_DIALOG=d;e="CLOSE_TAG_DIALOG";f.CLOSE_TAG_DIALOG=e;a="SAVE_DIALOG_TAGS";f.SAVE_DIALOG_TAGS=a;b="CANCEL_DIALOG_TAG_CHANGES";f.CANCEL_DIALOG_TAG_CHANGES=b;c="PHOTO_RENDERER_STATS";f.PHOTO_RENDERER_STATS=c;d="ENABLE_TAGGING";f.ENABLE_TAGGING=d;e="DISABLE_TAGGING";f.DISABLE_TAGGING=e;a="UPDATE_SPATIAL_TAGS";f.UPDATE_SPATIAL_TAGS=a;b="UPDATE_SPATIAL_TAGS_FROM_COMPOSER";f.UPDATE_SPATIAL_TAGS_FROM_COMPOSER=b;c="UPDATE_TAG_UNDER_MOUSE";f.UPDATE_TAG_UNDER_MOUSE=c;d="TAGGING_START";f.TAGGING_START=d;e="TAGGING_STOP";f.TAGGING_STOP=e;a="UPDATE_TAG_CLICKED";f.UPDATE_TAG_CLICKED=a;b="UPDATE_TAGGER";f.UPDATE_TAGGER=b;c="ENTER_TAGGING_MODE";f.ENTER_TAGGING_MODE=c;d="EXIT_TAGGING_MODE";f.EXIT_TAGGING_MODE=d;e="UPDATE_TARGETED_TAG";f.UPDATE_TARGETED_TAG=e;a="REDIRECT_FROM_CLICKED_TAG";f.REDIRECT_FROM_CLICKED_TAG=a;b="DELETED_SPATIAL_TAG";f.DELETED_SPATIAL_TAG=b;c="ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER";f.ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER=c}),null);
__d("SphericalMediaBaseActions",["SphericalMediaActionNamespaces","SphericalMediaActions"],(function(a,b,c,d,e,f){"use strict";f.dragStart=a;f.gyroStart=c;f.mouseAnimationStart=d;f.mouseEnter=e;f.tapHeadingIndicator=g;f.significantMove=h;f.viewportClicked=i;f.visibilityChanged=j;f.zoomStart=k;f.webGlInitFailed=l;f.webGlRenderFailed=m;f.webGlContextLost=n;f.canvasResizeStart=o;f.canvasResizeImgLoaded=p;f.canvasResizeSuccess=q;f.canvasResizeFailed=r;f.addSpatialTagFromPhotoTagger=s;f.updateCtrElem=t;f.showFallbackUI=u;f.useFallbackUI=v;a=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_BASE,data:a}};f.updateBase=a;function a(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").DRAG_START}}function c(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").GYRO_START}}function d(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").MOUSE_ANIMATION_START}}function e(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").MOUSE_ENTER}}function g(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").TAP_HEADING_INDICATOR}}function h(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").SIGNIFICANT_MOVE,data:{view:a}}}function i(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").VIEWPORT_CLICKED}}function j(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").VISIBILITY_CHANGED,data:a}}function k(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").ZOOM_START}}c=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_DIMENSION,data:{width:a,height:c}}};f.updateDimension=c;d=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_INITIAL_VIEWPORT,data:{initialYaw:a,initialPitch:c}}};f.updateInitialViewport=d;e=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_INITIAL_FOV,data:{initialFov:a}}};f.updateInitialFOV=e;g=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").SETUP_RENDERER,data:{renderer:a,dt:c}}};f.setupRenderer=g;function l(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").WEBGL_INIT_FAILED,data:{error:a}}}function m(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").WEBGL_RENDER_FAILED,data:{error:a,view:c}}}function n(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").WEBGL_CONTEXT_LOST}}h=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").SOURCE_ONLOAD}};f.sourceOnLoad=h;i=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").REPLACE_BASE_STATE,data:a}};f.replaceBaseState=i;j=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_SPATIAL_TAGS,data:a}};f.updateSpatialTags=j;k=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_SPATIAL_TAGS_FROM_COMPOSER,data:a}};f.updateSpatialTagsFromComposer=k;l=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_TAG_UNDER_MOUSE,data:a}};f.updateTagUnderMouse=l;m=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_FILE_URL,data:a}};f.updateFileURL=m;function o(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").CANVAS_RESIZE_START}}function p(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").CANVAS_RESIZE_IMG_LOADED,data:{width:a,height:c}}}function q(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").CANVAS_RESIZE_SUCCESS,data:a}}function r(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").CANVAS_RESIZE_FAILED,data:a}}n=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").ENABLE_TAGGING}};f.enableTagging=n;o=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").DISABLE_TAGGING}};f.disableTagging=o;p=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").TAGGING_START}};f.taggingStart=p;q=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").TAGGING_STOP}};f.taggingStop=q;r=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_TAG_CLICKED,data:a}};f.updateTagClicked=r;s=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_TAGGER,data:a}};f.updateTagger=s;t=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").ENTER_TAGGING_MODE}};f.enterTaggingMode=t;u=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").EXIT_TAGGING_MODE}};f.exitTaggingMode=u;v=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_TARGETED_TAG,data:a}};f.updateTargetedTag=v;a=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").REDIRECT_FROM_CLICKED_TAG}};f.redirectFromClickedTag=a;c=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").DELETED_SPATIAL_TAG}};f.deletedSpatialTag=c;function s(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER}}function t(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_CTR_ELEM,data:{element:a}}}function u(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").SHOW_FALLBACK}}d=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").REQUEST_PHOTO}};f.requestPhoto=d;e=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").REQUEST_PHOTO_FAILED,data:{id:a,error:c}}};f.requestPhotoFailed=e;g=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").RECEIVE_PHOTO,data:c}};f.receivePhoto=g;h=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_PARTIAL_LIMITS,data:a}};f.updatePartialLimits=h;function v(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").USE_FALLBACK}}i=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_FEED_ROOT_ELEMENT,data:a}};f.updateFeedRootElement=i}),null);
__d("SphericalParallaxUtils",["easeInOutInterpolate"],(function(a,b,c,d,e,f){"use strict";f.getMinYawOffset=k;f.getMaxYawOffset=l;f.calculateNewYaw=m;f.calculateYawOffset=a;var g=200,h=-100,i=g-h,j=45;function k(a,b,c,d){c=j*(c-h)/i;if(!a)return c;a=-a+b;if(d>180){b=-(360-d-c);return b>a?Math.abs(-(360-d)-a):c}else return d-c<a?d+a:c}function l(a,b,c,d){c=j*(g-c)/i;if(!a||d>180)return c;a=a-b;if(d<180)return c+d>a?a-d:c;else return d-360+c>a?a-(d-360):c}function m(a,c,d,e,f,j){e=k(e,j,c,d);f=l(f,j,c,d);if(a<h)return{yaw:-e,success:!0};if(a>g)return{yaw:f,success:!0};j=b("easeInOutInterpolate")((a-h)/i)*i+h;if(j>=h&&j<=g){j>c?a=d+f*((j-c)/(g-c)):a=d-e+e*(j-h)/(c-h);if(a<=d+f&&a>=d-e)return{yaw:a,success:!0}}return{yaw:0,success:!1}}function a(a,b,c,d){return m(a,50,0,b,c,d)}}),null);
__d("SphericalMediaConstants",[],(function(a,b,c,d,e,f){"use strict";a={COMP_PHOTO_EDIT_THUMB:"PhotoEditThumbanil",COMP_PHOTO_VIEWER:"PhotoViewer",EDIT_VIEWPORT_SIZE:{width:476,height:476},HALF_EQUIRECT_PARTIAL_LIMIT:85,HI_ALPHA_BG:{start:.2,end:.5},HI_ALPHA_ELEMENT:{start:.5,end:.85},HI_ALPHA_DURATION:400,HI_SIZE_NORMAL:{width:35,height:35,center_radius:2,background_radius:17.5,inner_radius:12,arc_radius:6.3,arc_stroke:5.3,inner_stroke:1,triangle:[2,2.5,5.2],rim_radius:16.8,rim_stroke:1.4},HI_SIZE_FULL:{width:50,height:50,center_radius:3,background_radius:25,inner_radius:17.14,arc_radius:9,arc_stroke:7.57,inner_stroke:1.5,triangle:[2.85,4.29,7.9],rim_radius:24,rim_stroke:2},HI_BLINK_ARC_RAD:Math.PI/6,HI_BLINK_DURATION:400,HI_FADE_OUT_DELAY:1e3,MOUSE_EXPOSURE:4e3,LOGGER_SURFACES:{newsfeed:"newsfeed",timeline:"timeline",fullpage:"photo_viewer",snowlift:"www_snowlift",composer:"composer",albumComposer:"album_composer",stories:"stories",other:"other"},LOGGER_SIGNIFICANT_MOVEMENT_DEGREE:30,LOGGER_SIGNIFICANT_MOVEMENT_MS:1e3,GYRO_SLIP_FACTOR:.15,RB_SPRING_FACTOR:25,RB_MAX_SPRING_DEGREE:15,RB_MAX_STRETCH_X_DEGREE:20,RB_MAX_STRETCH_Y_DEGREE:20,RB_FRICTION:.3,TILED_CUBE_FACES:{PLUS_X:2,MINUS_X:0,PLUS_Y:4,MINUS_Y:5,PLUS_Z:3,MINUS_Z:1},TILED_CUBE_TILE_CONTENT_SIZE:510,TILED_CUBE_TILE_PADDING_PIXELS:1,TAG:"tag",TAGGED_FACEBOX:"tagged_facebox",UNTAGGED_FACEBOX:"untagged_facebox",DEFAULT_SPATIAL_TAG_SIZE_DEGREE:10,DEFAULT_VOLUME:{MUTE:0,HIGH:.7}};b=a;e.exports=b}),null);
__d("SphericalMediaCanvasPool",["DOM"],(function(a,b,c,d,e,f){"use strict";var g=1,h="default",i=function(a,b){return a+b};a=function(){function a(){this.$2=new Map(),this.$3=new Map(),this.$1=null}var c=a.prototype;c.setLimit=function(a,b){b===void 0&&(b=h);var c=this.$3.get(b)||{queue:[],limit:1};c.limit=a;this.$3.set(b,c)};c.release=function(a,b){b===void 0&&(b=h);a=i(a,b);var c=this.$2.get(a);if(!c)return!1;b=this.$3.get(b);if(!b||b.queue.length===0)return!1;b.queue.splice(b.queue.indexOf(a),1);c.canvas.parentNode&&c.canvas.parentNode.removeChild(c.canvas);return this.$2["delete"](a)};c.get=function(a,c,d){d===void 0&&(d=h);var e=babelHelpers["extends"]({},c.canvasAttrs);if(!a||!c.beforeCanvasLost)throw new Error("Missing required arguments.");var f=i(a,d);e["data-id"]=e["data-id"]||a;a=this.$2.get(f);if(a)return a.canvas;a=this.$3.get(d)||{queue:[],limit:g};var j;if(a.queue.length<a.limit)j=b("DOM").create("canvas",e);else{var k=a.queue.shift(),l=this.$2.get(k);if(!l)throw new Error("Canvas pool could not find the item",k);j=l.canvas;l.beforeCanvasLost();this.$2["delete"](k);j.className=e.className;j.height=e.height;j.width=e.width;j.tabIndex=e.tabIndex;j.setAttribute("data-id",e["data-id"])}if(!j)throw new Error("Failed to get a canvas.");a.queue.push(f);this.$3.set(d,a);this.$2.set(f,{canvas:j,beforeCanvasLost:c.beforeCanvasLost});return j};return a}();c=new a();e.exports=c}),null);
__d("SphericalPhotoPartialLimits",["ImmutableRecordWithV4Types"],(function(a,b,c,d,e,f){"use strict";f.getPartialLimits=a;f.normalizePhotoRendererViewWithPartialLimits=c;f.normalizeViewWithPartialLimits=d;var g=b("ImmutableRecordWithV4Types").Record({partialLeftDegrees:null,partialRightDegrees:null,partialTopDegrees:null,partialBottomDegrees:null});f.makePartialLimits=g;function a(a){var b=Number(a.croppedAreaImageHeightPixels)||0,c=Number(a.croppedAreaImageWidthPixels)||0,d=Number(a.croppedAreaLeftPixels)||0,e=Number(a.croppedAreaTopPixels)||0,f=Number(a.fullPanoHeightPixels)||0;a=Number(a.fullPanoWidthPixels)||0;var h,i,j,k;if(c!==0&&c!==a&&c+d<=a){c=360*c/a;j=180*(1-2*d/a);k=c-j}b!==0&&b!==f&&b+e<=f&&(e!==0&&(h=90*(1-2*e/f)),e+b!==f&&(i=180*(e+b-f/2)/f));return g({partialTopDegrees:h,partialBottomDegrees:i,partialLeftDegrees:j,partialRightDegrees:k})}function c(a,b){var c=b.partialLeftDegrees,d=b.partialRightDegrees,e=b.partialTopDegrees;b=b.partialBottomDegrees;if(c||c===0){c=-1*c;a.yaw<c&&(a.yaw=c)}if(d||d===0){c=d;a.yaw>c&&(a.yaw=c)}d=e||e===0;c=b||b===0;e=e||0;b=-1*(b||0);d&&(a.pitch>e&&(a.pitch=e));c&&(a.pitch<b&&(a.pitch=b));d&&c&&(e<0&&e<b?a.pitch=b:b>0&&e<b&&(a.pitch=e));return a}function d(a,b){var c=b.partialLeftDegrees,d=b.partialRightDegrees,e=b.partialTopDegrees;b=b.partialBottomDegrees;if(c){c=-1*(c-a.fov/2);a.yaw<c&&(a.yaw=c)}if(d){c=d-a.fov/2;a.yaw>c&&(a.yaw=c)}if(e){d=e-a.fov/2;a.pitch>d&&(a.pitch=d)}if(b){c=-1*(b-a.fov/2);a.pitch<c&&(a.pitch=c)}return a}}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("symbol-observable-1.2.0",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});g["default"]=a;function a(a){var b;a=a.Symbol;typeof a==="function"?a.observable?b=a.observable:(b=a("observable"),a.observable=b):b="@@observable";return b}}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){Object.defineProperty(l,"__esModule",{value:!0});var b=k();c=c(b);function c(a){return a&&a.__esModule?a:{"default":a}}typeof self!=="undefined"?b=self:typeof window!=="undefined"?b=window:typeof a!=="undefined"?b=a:typeof m!=="undefined"?b=m:b=Function("return this")();c=c["default"](b);l["default"]=c}var o=!1;function p(){o||(o=!0,n());return m.exports}function b(a){switch(a){case void 0:return p()}}e.exports=b}),null);