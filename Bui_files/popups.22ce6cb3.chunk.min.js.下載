(window.webpackJsonp__wix_thunderbolt_app=window.webpackJsonp__wix_thunderbolt_app||[]).push([[79],{187:function(e,n,t){"use strict";t.r(n),t.d(n,"site",(function(){return _})),t.d(n,"page",(function(){return S})),t.d(n,"editor",(function(){return k})),t.d(n,"name",(function(){return o.d})),t.d(n,"PopupsSymbol",(function(){return o.c})),t.d(n,"PopupsLinkUtilsAPISymbol",(function(){return o.b})),t.d(n,"PopupUtilsSymbol",(function(){return o.a}));var o=t(189),u=t(117),r=t(382),p=t(375),c=t(0),i=t(27),a=t(367),d=t(376),l=t(237),s=t(235),P=t(12),g=Object(i.h)([Object(i.e)(p.a.AppWillLoadPageHandler),u.b,Object(i.f)(a.b,"popups"),d.d,Object(i.f)(a.c,o.d),P.c],(function(e,n,t,o,u,r){var i,a=[],d=[],P=null,g=function(e){"Escape"===e.key&&f()},f=function(){return Object(c.b)(void 0,void 0,void 0,(function(){var e,o,u;return Object(c.d)(this,(function(i){switch(i.label){case 0:return(e=b())?[4,r(e,e)]:[2];case 1:return o=i.sent(),u=o.getAllImplementersOf(p.a.PageWillUnmountHandler),[4,Promise.all(u.map((function(n){return n.pageWillUnmount({pageId:e,contextId:e})})))];case 2:return i.sent(),Object(l.a)(),v(e),Object(s.e)(n)||n.removeEventListener("keydown",g),P&&(P(),P=null),d.length>0&&d.forEach((function(e){e&&e()})),t.update((function(e){return Object(c.a)(Object(c.a)({},e),{pageWillLoadHandler:null,currentPopupId:void 0,pendingPopupId:void 0})})),[2]}}))}))},b=function(){return t.get()?t.get().currentPopupId:void 0},O=function(e){var n,t=o.getPageWrapperComponentId(e,e);return o.addComponentToDynamicStructure("POPUPS_ROOT",{componentType:"PopupRoot",components:[t]},((n={})[t]={componentType:"PageMountUnmount",components:[e]},n))},v=function(e){var n=o.getPageWrapperComponentId(e,e);o.removeComponentFromDynamicStructure(n),o.removeComponentFromDynamicStructure("POPUPS_ROOT")};return{isPopupPage:function(e){return u.popupPages[e]},openPopupPage:function(o,u){return void 0===u&&(u=null),Object(c.b)(this,void 0,void 0,(function(){var p;return Object(c.d)(this,(function(i){switch(i.label){case 0:return d=o,(null==(b=t.get())?void 0:b.currentPopupId)===d||(null==b?void 0:b.pendingPopupId)===d?[2]:(t.update((function(e){return Object(c.a)(Object(c.a)({},e),{pendingPopupId:o})})),Object(l.b)(),p=r(o,o),[4,Promise.all(e.map((function(e){return e.appWillLoadPage({pageId:o,contextId:o})})))]);case 1:return i.sent(),[4,p];case 2:return i.sent(),u&&(P=u),a.length>0&&a.forEach((function(e){e&&e(o)})),Object(s.e)(n)||n.addEventListener("keydown",g),[4,O(o)];case 3:return i.sent(),t.update((function(e){return Object(c.a)(Object(c.a)({},e),{pageWillLoadHandler:f,currentPopupId:o})})),[2]}var d,b}))}))},closePopupPage:f,registerToPopupEvent:function(e,t){switch(e){case"popupScroll":i=t;var o=n.document.getElementById("POPUPS_ROOT");o&&o.addEventListener("scroll",i);break;case"popupOpen":a.push(t);break;case"popupClose":d.push(t)}},getCurrentPopupId:b}})),f=Object(i.h)([Object(i.f)(a.b,"popups")],(function(e){return{appWillLoadPage:function(){var n=e.get();n&&n.pageWillLoadHandler&&n.pageWillLoadHandler()}}})),b=t(16),O=t(4),v=["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"],m=Object(i.h)([o.c,O.i],(function(e,n){return{handleClick:function(t){var o=t.getAttribute("data-popupid");if(o)return e.openPopupPage(o),!0;var u=n.getFullUrlWithoutQueryParams(),r=!!e.getCurrentPopupId(),p=t.getAttribute("href"),c=u===(p&&Object(b.c)(p)),i=t.getAttribute("data-anchor")||"",a=v.includes(i);return!(!r||!c&&!a)&&(e.closePopupPage(),!0)}}})),j=t(380),h=Object(i.h)([o.c,j.a],(function(e,n){return{componentTypes:["PopupCloseIconButton"],componentWillMount:function(t){n.register(t.id,"onClick",e.closePopupPage)}}})),I=Object(i.h)([Object(i.f)(a.d,o.d),o.c,j.a],(function(e,n,t){var o=e.closeSiteButtons;return{componentTypes:["SiteButton"],componentWillMount:function(e){o[e.id]&&t.register(e.id,"onClick",n.closePopupPage)}}})),C=Object(i.h)([Object(i.f)(a.d,o.d),o.c,j.a],(function(e,n,t){var o=e.popupsWithCloseOnOverlayClick;return{componentTypes:["PopupPage","ResponsivePopupPage"],componentWillMount:function(e){o[e.id]&&t.register(e.id,"onClick",n.closePopupPage)}}})),y=Object(i.h)([Object(i.f)(a.c,o.d),Object(i.f)(a.b,o.d)],(function(e,n){return{getPopupPages:function(){return e.popupPages},getCurrentOrPendingPopupId:function(){var e,t;return(null===(e=n.get())||void 0===e?void 0:e.currentPopupId)||(null===(t=n.get())||void 0===t?void 0:t.pendingPopupId)}}})),W=Object(i.h)([Object(i.f)(a.c,o.d),Object(i.f)(a.b,o.d)],(function(e,n){return{isPopupPage:function(n){return e.popupPages[n]},getCurrentPopupId:function(){var e;return null===(e=n.get())||void 0===e?void 0:e.currentPopupId}}})),L=Object(i.h)([o.b],(function(e){return{get platformEnvData(){return{popups:{popupPages:e.getPopupPages()}}}}})),T=t(192),_=function(e){e(o.c).to(g),e(u.g).to(L),e(o.a).to(W),e(o.b).to(y),e(r.c).to(m),e(p.a.AppWillLoadPageHandler).to(f)},S=function(e){e(T.e).to(h),e(T.e).to(I),e(T.e).to(C)},k=function(e){_(e),S(e)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/popups.22ce6cb3.chunk.min.js.map