if (self.CavalryLogger) { CavalryLogger.start_js(["s\/GRq8Z"]); }

__d("VisualPollUnvoteMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"viewer_has_voted",storageKey:null};b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"QuestionRemoveVoteResponsePayload",kind:"LinkedField",name:"question_remove_vote",plural:!1,selections:[{alias:null,args:null,concreteType:"QuestionOption",kind:"LinkedField",name:"option",plural:!1,selections:[b,c,{alias:null,args:null,concreteType:"QuestionOptionVotersConnection",kind:"LinkedField",name:"voters",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Question",kind:"LinkedField",name:"question",plural:!1,selections:[b,c],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VisualPollUnvoteMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VisualPollUnvoteMutation",selections:b},params:{id:"1613120932078401",metadata:{},name:"VisualPollUnvoteMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VisualPollVoteMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"viewer_has_voted",storageKey:null};b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"QuestionAddVoteResponsePayload",kind:"LinkedField",name:"question_add_vote",plural:!1,selections:[{alias:null,args:null,concreteType:"QuestionOption",kind:"LinkedField",name:"option",plural:!1,selections:[b,c,{alias:null,args:null,concreteType:"QuestionOptionVotersConnection",kind:"LinkedField",name:"voters",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Question",kind:"LinkedField",name:"question",plural:!1,selections:[b,c],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VisualPollVoteMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VisualPollVoteMutation",selections:b},params:{id:"1766381183403674",metadata:{},name:"VisualPollVoteMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VisualPollVoteSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c=[{alias:null,args:null,concreteType:"Question",kind:"LinkedField",name:"question",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"VisualPollAttachmentComponent_question"}],storageKey:null}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"viewer_has_voted",storageKey:null},f=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];e=[{alias:null,args:null,concreteType:"Question",kind:"LinkedField",name:"question",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_author",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"response_method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"poll_end_time",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"hidden_results",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:2},{kind:"Literal",name:"orderby",value:["creation_time"]}],concreteType:"QuestionOptionsConnection",kind:"LinkedField",name:"options",plural:!1,selections:[{alias:null,args:null,concreteType:"QuestionOptionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuestionOption",kind:"LinkedField",name:"node",plural:!1,selections:[d,e,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text_with_entities",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"QuestionOptionVotersConnection",kind:"LinkedField",name:"voters",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"associated_external_image",plural:!1,selections:f,storageKey:null},{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"associated_image",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:f,storageKey:null},d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'options(first:2,orderby:["creation_time"])'}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VisualPollVoteSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"question_vote_subscribe",plural:!1,selections:[{kind:"InlineFragment",selections:c,type:"QuestionAddVoteResponsePayload",abstractKey:null},{kind:"InlineFragment",selections:c,type:"QuestionRemoveVoteResponsePayload",abstractKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VisualPollVoteSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"question_vote_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:e,type:"QuestionAddVoteResponsePayload",abstractKey:null},{kind:"InlineFragment",selections:e,type:"QuestionRemoveVoteResponsePayload",abstractKey:null}],storageKey:null}]},params:{id:"1966433156719006",metadata:{subscriptionName:"question_vote_subscribe"},name:"VisualPollVoteSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("VisualPollAttachmentComponent_question.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"viewer_has_voted",storageKey:null},c=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualPollAttachmentComponent_question",selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_author",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"response_method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"poll_end_time",storageKey:null},b,{alias:null,args:null,kind:"ScalarField",name:"hidden_results",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:2},{kind:"Literal",name:"orderby",value:["creation_time"]}],concreteType:"QuestionOptionsConnection",kind:"LinkedField",name:"options",plural:!1,selections:[{alias:null,args:null,concreteType:"QuestionOptionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuestionOption",kind:"LinkedField",name:"node",plural:!1,selections:[a,b,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text_with_entities",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"QuestionOptionVotersConnection",kind:"LinkedField",name:"voters",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"associated_external_image",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"associated_image",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:c,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'options(first:2,orderby:["creation_time"])'}],type:"Question",abstractKey:null}}();e.exports=a}),null);
__d("VisualPollAttachmentComponent_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualPollAttachmentComponent_viewer",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("VisualPollAttachmentQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"question"}],b=[{kind:"Variable",name:"id",variableName:"question"}],c={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"viewer_has_voted",storageKey:null},f=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VisualPollAttachmentQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"VisualPollAttachmentComponent_viewer"}],storageKey:null},{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"VisualPollAttachmentComponent_question"}],type:"Question",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VisualPollAttachmentQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[c,d],storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c,d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_author",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"response_method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"poll_end_time",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"hidden_results",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:2},{kind:"Literal",name:"orderby",value:["creation_time"]}],concreteType:"QuestionOptionsConnection",kind:"LinkedField",name:"options",plural:!1,selections:[{alias:null,args:null,concreteType:"QuestionOptionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuestionOption",kind:"LinkedField",name:"node",plural:!1,selections:[d,e,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text_with_entities",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"QuestionOptionVotersConnection",kind:"LinkedField",name:"voters",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"associated_external_image",plural:!1,selections:f,storageKey:null},{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"associated_image",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:f,storageKey:null},d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'options(first:2,orderby:["creation_time"])'}],type:"Question",abstractKey:null}],storageKey:null}]},params:{id:"1896077367083695",metadata:{},name:"VisualPollAttachmentQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("VisualPollUnvoteMutation",["RelayModern","VisualPollUnvoteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";f.commit=a;var g,h=g!==void 0?g:g=b("VisualPollUnvoteMutation.graphql");function a(a,c,d){c={input:{question_id:c.question_id,option_id:c.option_id,actor_id:c.actor_id}};return b("RelayModern").commitMutation(a,{mutation:h,variables:c,onCompleted:d&&d.onCompleted,onError:d&&d.onError,optimisticUpdater:d&&d.optimisticUpdater,optimisticResponse:d&&d.optimisticResponse,updater:d&&d.updater})}}),null);
__d("VisualPollVoteMutation",["RelayModern","VisualPollVoteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";f.commit=a;var g,h=g!==void 0?g:g=b("VisualPollVoteMutation.graphql");function a(a,c,d){c={input:{question_id:c.question_id,option_id:c.option_id,actor_id:c.actor_id,tracking:c.tracking}};return b("RelayModern").commitMutation(a,{mutation:h,variables:c,onCompleted:d&&d.onCompleted,onError:d&&d.onError,optimisticUpdater:d&&d.optimisticUpdater,optimisticResponse:d&&d.optimisticResponse,updater:d&&d.updater})}}),null);
__d("VisualPollVoteSubscription",["RelayModern","VisualPollVoteSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";f.subscribe=a;var g,h=g!==void 0?g:g=b("VisualPollVoteSubscription.graphql");function a(a,c,d){c={input:c};return b("RelayModern").requestSubscription(a,{subscription:h,variables:c,onCompleted:d&&d.onCompleted,onError:d&&d.onError,onNext:d&&d.onNext})}}),null);
__d("AsyncDialog",["cx","AsyncRequest","CSS","DOM","DialogX","Keys","LayerFadeOnShow","LoadingDialogDimensions","Parent","ReactDOM","URI","XUIDialogTitle.react","XUISpinner.react","emptyFunction","forEachObject","react"],(function(a,b,c,d,e,f,g){var h,i,j=h||b("react"),k,l;function m(a){var c=b("LoadingDialogDimensions").WIDTH,d;a&&(c=parseInt(a.getAttribute("data-dialog-width"),10)||c,d=a.getAttribute("data-dialog-title")||d);if(!k){var e=(a=b("DOM")).create("div",{className:"_57-x"});k=new(b("DialogX"))({width:c,addedBehaviors:[b("LayerFadeOnShow")],xui:!0},a.create("div",null,e));l=a.create("div");a.insertBefore(e,l);b("ReactDOM").render(j.jsx(b("XUISpinner.react"),{size:"large"}),e);k.subscribe(["key","blur"],function(a,c){if(a=="blur"||a=="key"&&c.keyCode==b("Keys").ESC){q();return!1}})}d?b("ReactDOM").render(j.jsx(b("XUIDialogTitle.react"),{showCloseButton:!1,children:d}),l):b("DOM").empty(l);k.setWidth(c);return k}var n={},o=1,p=[];function q(){b("forEachObject")(n,function(a,b){a.abandon(),r(b)})}function r(a){delete n[a],Object.keys(n).length||m().hide()}function s(a,c){var d=o++;p[d]=c;n[d]=a;var e=r.bind(null,""+d);Object.assign(a.getData(),{__asyncDialog:d});c=a.getRelativeTo();c!=null&&c instanceof HTMLElement&&m(c).setCausalElement(c).show();var f=a.finallyHandler;a.setFinallyHandler(function(a){var c=a.getPayload();c&&c.asyncURL&&t.send(new(b("AsyncRequest"))(c.asyncURL));e();f&&f(a)});var g=a.abortHandler||b("emptyFunction"),h=a.interceptHandler||b("emptyFunction");a.setInterceptHandler(function(){try{h()}finally{e()}}).setAbortHandler(function(){try{g()}finally{e()}});a.send()}var t={send:function(a,c){s(a,c||b("emptyFunction"))},bootstrap:function(a,c,d,e){if(!a)return;var f=b("Parent").byClass(c,"stat_elem")||c;if(f&&b("CSS").hasClass(f,"async_saving"))return!1;var g=new(i||(i=b("URI")))(a).getQueryData();d=d==="dialog";a=new(b("AsyncRequest"))().setURI(a).setData(g).setMethod(d?"GET":"POST").setReadOnly(d).setStatusElement(f);c&&(a.setRelativeTo(c),a.setNectarModuleDataSafe(c));t.send(a,e)},respond:function(a,b){var c=p[a];c&&(c(b),delete p[a])},getLoadingDialog:function(){return m()}};e.exports=t}),null);
__d("XVisualPollVotesDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/polls/visual_poll/votes/dialog/",{question_id:{type:"FBID",required:!0},actor_id:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d("timeString",["fbt","DateConsts"],(function(a,b,c,d,e,f,g){e.exports=a;function h(a){var c,d;a<10?c=g._("\u525b\u525b"):a<b("DateConsts").SEC_PER_MIN?c=g._("\u5728\u5e7e\u79d2\u9418\u524d"):a<b("DateConsts").SEC_PER_MIN*2?c=g._("\u7d04 1 \u5206\u9418\u524d"):a<b("DateConsts").SEC_PER_HOUR?(d=Math.floor(a/b("DateConsts").SEC_PER_MIN),c=g._("{number}\u5206\u9418\u524d",[g._param("number",d)])):a<b("DateConsts").SEC_PER_HOUR*2?c=g._("\u7d04 1 \u5c0f\u6642\u524d"):a<b("DateConsts").SEC_PER_DAY?(d=Math.floor(a/b("DateConsts").SEC_PER_HOUR),c=g._("{number}\u5c0f\u6642\u524d",[g._param("number",d)])):a<b("DateConsts").SEC_PER_DAY*2?c=g._("\u5927\u7d04\u4e00\u5929\u524d"):a<b("DateConsts").SEC_PER_DAY*30?(d=Math.floor(a/b("DateConsts").SEC_PER_DAY),c=g._("{number}\u5929\u524d",[g._param("number",d)])):a<b("DateConsts").SEC_PER_DAY*30*2?c=g._("\u7d04 1 \u500b\u6708\u524d"):a<b("DateConsts").SEC_PER_YEAR?(d=Math.floor(a/b("DateConsts").SEC_PER_DAY/30),c=g._("{number}\u500b\u6708\u524d",[g._param("number",d)])):a<b("DateConsts").SEC_PER_YEAR*2?c=g._("1 \u5e74\u524d"):(d=Math.floor(a/b("DateConsts").SEC_PER_YEAR),c=g._("{number}\u5e74\u524d",[g._param("number",d)]));return c}function i(a){var c,d;a=Math.abs(a);a<10?c=g._("\u525b\u525b"):a<b("DateConsts").SEC_PER_MIN?c=g._("\u5e7e\u79d2\u9418\u5f8c"):a<b("DateConsts").SEC_PER_MIN*2?c=g._("\u7d04 1 \u5206\u9418\u5f8c"):a<b("DateConsts").SEC_PER_HOUR?(d=Math.floor(a/b("DateConsts").SEC_PER_MIN),c=g._("{number}\u5206\u9418\u5f8c",[g._param("number",d)])):a<b("DateConsts").SEC_PER_HOUR*2?c=g._("\u7d04 1 \u5c0f\u6642\u5f8c"):a<b("DateConsts").SEC_PER_DAY?(d=Math.floor(a/b("DateConsts").SEC_PER_HOUR),c=g._("{number}\u5c0f\u6642\u5f8c",[g._param("number",d)])):a<b("DateConsts").SEC_PER_DAY*2?c=g._("\u7d04 1 \u5929\u5f8c"):a<b("DateConsts").SEC_PER_DAY*30?(d=Math.floor(a/b("DateConsts").SEC_PER_DAY),c=g._("{number}\u5929\u5f8c",[g._param("number",d)])):a<b("DateConsts").SEC_PER_DAY*30*2?c=g._("\u7d04 1 \u500b\u6708\u5f8c"):a<b("DateConsts").SEC_PER_YEAR?(d=Math.floor(a/b("DateConsts").SEC_PER_DAY/30),c=g._("{number}\u500b\u6708\u5f8c",[g._param("number",d)])):a<b("DateConsts").SEC_PER_YEAR*2?c=g._("\u8d85\u904e 1 \u5e74\u5f8c"):(d=Math.floor(a/b("DateConsts").SEC_PER_YEAR),c=g._("{number}\u5e74\u5f8c",[g._param("number",d)]));return c}function a(a,c){c=c==null||c===0?Date.now():c;c=Math.floor((c-a)/b("DateConsts").MS_PER_SEC);if(c>=0)return h(c);else return i(c)}}),null);
__d("VisualPollAttachmentComponent.react",["cx","fbt","ix","AsyncDialog","AsyncRequest","DateConsts","Image.react","LineClamp.react","RelayModern","TextWithEntities.react","VisualPollAttachmentComponent_question.graphql","VisualPollAttachmentComponent_viewer.graphql","VisualPollUnvoteMutation","VisualPollVoteMutation","VisualPollVoteSubscription","XVisualPollVotesDialogController","clearTimeout","intlSummarizeNumber","react","setTimeout","timeString"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||b("react"),n={checkmark:"_204n",checkmarkOverlay:"_6985",footer:"_204o",footerEndTime:"_204p",footerUndoButtonText:"_4kpd",footerVoteCount:"_204q",footerVoteCountLink:"_62bz",footerVoteInfo:"_62b-",gifImage:"_204t",option:"_204u",options:"_204v",optionButton:"_42ft _4jy0 _517h _51sy _204w",mediaOptionButton:"_42ft _4jy0 _517h _51sy _64gp _204w",optionContainer:"_4s7t",optionResult:"_204x",optionText:"_1gt-",percentageBar:"_22ts",percentageBarInner:"_2_xu",percentageContainer:"_22tu",percentageText:"_22tv",resultOverlay:"_22tw",resultOverlayHiddenResults:"_6986",vtOptionResult:"_2utf",vtOptionResultText:"_2utm",vtPercentageText:"_2utn",vtProgressBar:"_5e4h _2uto",root:"_204y"};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.subscription=null,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a;a=(a=this.props.question)==null?void 0:a.id;a!=null&&(this.subscription=b("VisualPollVoteSubscription").subscribe(this.props.relay.environment,{question_id:a}));this.$1=this.$2()};d.componentDidUpdate=function(a){a=a.question.poll_end_time;var c=this.props.question.poll_end_time;a!==c&&(b("clearTimeout")(this.$1),this.$1=this.$2())};d.componentWillUnmount=function(){this.subscription!=null&&this.subscription.dispose(),b("clearTimeout")(this.$1)};d.render=function(){var a=this,b=this.props.question;if(!b||!b.options)return null;var c=b.options.edges.slice(0,2),d=c.reduce(function(a,b){return a+b.node.voters.count},0),e=b.response_method;b=c.map(function(b,c){if(e==="GIF_CHOOSE_ONE"||e==="IMAGE_CHOOSE_ONE")return a.$3(b,c,d);else if(e==="VISUAL_TEXT_CHOOSE_ONE")return a.$4(b,c,d);return null});return m.jsxs("div",{className:n.root,children:[m.jsx("div",{className:e==="GIF_CHOOSE_ONE"||e==="IMAGE_CHOOSE_ONE"?n.options:null,children:b}),this.$5(d)]})};d.$6=function(){var a=this.props.question;return!this.props.disableVote&&!!a.can_viewer_post&&!a.viewer_has_voted&&!this.$7()};d.$8=function(){var a=this.props.question;return!this.props.disableVote&&!!a.can_viewer_post&&!!a.viewer_has_voted&&!this.$7()};d.$7=function(){var a=this.props.question.poll_end_time;return!!a&&a*b("DateConsts").MS_PER_SEC-Date.now()<0};d.$9=function(){var a=this.props.question,b=a.hidden_results;a=a.is_viewer_author;var c=this.$7();if(c||a||!b)return!0;return b?!1:!0};d.$10=function(a,c){var d,e;a=(a=this.props.question)!=null?a.id:a;e=(e=this.props.viewer)!=null?(e=e.actor)!=null?e.id:e:e;d=(d=c)!=null?(d=d.node)!=null?d.id:d:d;c=c.node.voters.count;this.$7()&&this.forceUpdate();if(!this.$6()||!a||!e||!d||typeof c!=="number")return;b("VisualPollVoteMutation").commit(this.props.relay.environment,{option_id:d,question_id:a,actor_id:e,tracking:[this.props.tracking]},{optimisticResponse:{question_add_vote:{option:{id:d,viewer_has_voted:!0,voters:{count:c+1}},question:{id:a,viewer_has_voted:!0}}}})};d.$11=function(){var a,c,d;d=(d=this.props.question)!=null?d.id:d;c=(c=this.props.viewer)!=null?(c=c.actor)!=null?c.id:c:c;a=(a=this.props.question)!=null?(a=a.options)!=null?a.edges:a:a;this.$7()&&this.forceUpdate();if(!this.$8()||!d||!c||!a)return;var e=null,f=null;for(var a=a,g=Array.isArray(a),h=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i,j;if(g){if(h>=a.length)break;j=a[h++]}else{h=a.next();if(h.done)break;j=h.value}j=j;if((i=j)!=null?(i=i.node)!=null?i.viewer_has_voted:i:i){e=(i=j.node)!=null?i.id:i;f=(i=j.node)!=null?(i=i.voters)!=null?i.count:i:i}}if(!e||typeof f!=="number")return;b("VisualPollUnvoteMutation").commit(this.props.relay.environment,{option_id:e,question_id:d,actor_id:c},{optimisticResponse:{question_remove_vote:{option:{id:e,viewer_has_voted:!1,voters:{count:f-1}},question:{id:d,viewer_has_voted:!1}}}})};d.$5=function(a){var c=this.props.question,d=c.hidden_results,e=c.is_viewer_author,f=c.poll_end_time;c=c.viewer_has_voted;var g=null;this.$7()?g=h._("\u9019\u500b\u7968\u9078\u6d3b\u52d5\u5df2\u7d50\u675f\u3002"):f&&(c||e)&&d?g=m.jsx("div",{children:h._("\u9019\u500b\u7968\u9078\u6d3b\u52d5\u7684\u7d50\u679c\u5c07\u65bc{end_time}\u63ed\u66c9",[h._param("end_time",b("timeString")(f*b("DateConsts").MS_PER_SEC))])}):f&&(g=m.jsx("div",{children:h._("\u9019\u500b\u7968\u9078\u6d3b\u52d5\u5c07\u65bc{end_time}\u7d50\u675f",[h._param("end_time",b("timeString")(f*b("DateConsts").MS_PER_SEC))])}));g!=null&&(g=m.jsx("div",{className:n.footerEndTime,children:g}));d=null;this.$8()&&(d=m.jsx("a",{href:"#",onClick:this.$11.bind(this),children:m.jsx("div",{className:n.footerUndoButtonText,children:h._("\u53d6\u6d88\u6295\u7968")})}));f=null;a>0&&this.$9()&&(f=m.jsx("div",{className:n.footerVoteCount,children:h._({"*":"{number}\u7968","_1":"1 \u7968"},[h._plural(a,"number",b("intlSummarizeNumber")(a))])}),(c||e)&&(f=m.jsx("a",{className:n.footerVoteCountLink,href:"#",onClick:this.$12.bind(this),children:f})));return g!=null||f!=null?m.jsxs("div",{className:n.footer,children:[g,d,m.jsx("div",{style:{flexGrow:1}}),m.jsx("div",{className:n.footerVoteInfo,children:f})]}):null};d.$3=function(a,c,d){var e=this,f=null,g=a.node.associated_image,h=a.node.associated_external_image,j=this.$9();if(g&&g.image&&g.image.uri)f=g.image.uri;else if(h&&h.uri)f=h.uri;else return null;g=this.$6();h=a.node.viewer_has_voted;var k={cursor:g?"pointer":null,marginRight:c===0?"4px":0};return m.jsxs("div",{className:n.option,onClick:function(){return e.$10(c,a)},role:"button",style:k,tabIndex:c,children:[m.jsxs("div",{className:n.optionContainer,children:[m.jsx(b("Image.react"),{className:n.gifImage,src:f}),j?this.$13(a,d):this.$14(a)]}),m.jsxs("div",{className:g?n.mediaOptionButton:n.optionResult,children:[m.jsx(b("LineClamp.react"),{lines:2,lineHeight:16,disableNative:!1,fitHeightToShorterText:!0,enableTooltipOnOverflow:!0,children:m.jsx(b("TextWithEntities.react"),{className:n.optionText,renderEmoji:!0,renderEmoticons:!0,text:a.node.text_with_entities.text})}),h&&j?m.jsx(b("Image.react"),{className:n.checkmark,src:i("383003")}):null]})]},a.node.id)};d.$4=function(a,c,d){var e=this,f=this.$6(),g=a.node.viewer_has_voted,h=this.props.question.hidden_results,j=this.props.question.is_viewer_author,k={cursor:f?"pointer":null,marginBottom:c===0?"8px":0};d=d===0?0:this.$15(a.node.voters.count/d*100);g=g?m.jsx(b("Image.react"),{className:n.checkmark,src:i("383003")}):null;var l;f?l=m.jsx(b("TextWithEntities.react"),{className:n.optionText,renderEmoji:!0,renderEmoticons:!0,text:a.node.text_with_entities.text}):h&&!j?l=m.jsxs("div",{children:[m.jsx(b("TextWithEntities.react"),{className:n.optionText,renderEmoji:!0,renderEmoticons:!0,text:a.node.text_with_entities.text}),g]}):l=m.jsxs("div",{className:n.vtOptionResult,children:[m.jsxs("span",{className:n.vtPercentageText,style:{marginRight:"8px"},children:[d,"%"]}),m.jsx(b("TextWithEntities.react"),{className:n.vtOptionResultText,renderEmoji:!0,renderEmoticons:!0,text:a.node.text_with_entities.text}),g]});return m.jsxs("div",{className:n.option,onClick:function(){return e.$10(c,a)},role:"button",style:k,tabIndex:c,children:[f||h&&!j?null:m.jsx("div",{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":d,className:n.vtProgressBar,children:m.jsx("div",{className:"_5e4k",style:{width:"calc(12px + "+d+" * (100% - 12px) / 100)"}})}),m.jsx("div",{className:f||h&&!j?n.optionButton:n.vtOptionResult,children:l})]},a.node.id)};d.$14=function(a){a=a.node.viewer_has_voted;return this.$6()||!a?null:m.jsx("div",{className:n.percentageContainer,children:m.jsx("div",{className:n.resultOverlayHiddenResults,children:m.jsx(b("Image.react"),{className:n.checkmarkOverlay,src:i("512850")})})})};d.$13=function(a,b){if(this.$6())return null;a=b===0?0:this.$15(a.node.voters.count/b*100);return m.jsx("div",{className:n.resultOverlay,children:m.jsx("div",{className:n.percentageContainer,children:m.jsxs("div",{style:{display:"flex"},children:[m.jsxs("div",{className:n.percentageText,children:[a,"%"]}),m.jsx("div",{className:n.percentageBar,children:m.jsx("div",{className:n.percentageBarInner,style:{width:"calc((100% - 12px) * "+a/100+" + 12px)"}})})]})})})};d.$15=function(a){if(a<49.5||a>50.5){var b=Math.round(a);a+.5===b&&a<50&&b--;b===0&&a>0?b=1:b===100&&a<100&&(b=99);return b}b=a*10;a=Math.round(b);b+.5===a&&b<500&&a--;a===500&&(b<a?a--:b>a&&a++);return a/10};d.$12=function(){var a=b("XVisualPollVotesDialogController").getURIBuilder().setFBID("question_id",this.props.question.id).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a))};d.$2=function(){var a,c=this;a=(a=this.props.question)==null?void 0:a.poll_end_time;return a==null||this.$7()?null:b("setTimeout")(function(){return c.forceUpdate()},a*b("DateConsts").MS_PER_SEC-Date.now())};return c}(m.Component);c=b("RelayModern").createFragmentContainer(a,{viewer:j!==void 0?j:j=b("VisualPollAttachmentComponent_viewer.graphql"),question:k!==void 0?k:k=b("VisualPollAttachmentComponent_question.graphql")});e.exports=c}),null);
__d("VisualPollAttachment.react",["RelayFBEnvironment","RelayModern","VisualPollAttachmentComponent.react","VisualPollAttachmentQuery.graphql","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");function a(a){var c=g!==void 0?g:g=b("VisualPollAttachmentQuery.graphql"),d=function(c){var d=c.error;c=c.props;if(d)return i.jsx("div",{children:d.message});else if(!c)return null;return i.jsx(b("VisualPollAttachmentComponent.react"),babelHelpers["extends"]({},c,{question:c.node,tracking:a.tracking,disableVote:a.disableVote}))};return i.jsx(b("RelayModern").QueryRenderer,{environment:b("RelayFBEnvironment"),query:c,variables:{question:a.question},render:d})}}),null);